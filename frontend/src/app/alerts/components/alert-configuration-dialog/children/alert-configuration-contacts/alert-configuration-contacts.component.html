<mat-form-field class="contact-list" (click)="showMegaPanel()" floatLabel="never">
  <mat-chip-list #chipList>

    <mat-chip *ngFor="let id of selectedContacts" [selectable]="selectable"
      [removable]="contactRemovable" (removed)="removeContactFromSelectedContacts(id)">
      {{getContactFromId(id).name}}
    <mat-icon matChipRemove *ngIf="contactRemovable">cancel</mat-icon>
    </mat-chip>

    <input placeholder="Add contacts..."
            [matChipInputFor]="chipList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            [matChipInputAddOnBlur]="addOnBlur"
            (matChipInputTokenEnd)="addUserInputToSelectedContacts($event)">
  </mat-chip-list>
</mat-form-field>

<div *ngIf="megaPanelVisible" class="mega-panel">

  <div class="panel-header">
    <div class="panel-title">
      Select Recipients
    </div>
    <div>
      <button mat-button [matMenuTriggerFor]="menu">Create New Recipient</button>
      <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="setPanelContent('group')">Group</button>
          <button mat-menu-item (click)="setPanelContent('slack')">Slack</button>
          <button mat-menu-item (click)="setPanelContent('opsgenie')">OpsGenie</button>
          <button mat-menu-item (click)="setPanelContent('email')">Email</button>
          <button mat-menu-item>HTTP</button>
          <button mat-menu-item>OC</button>
      </mat-menu>
      <button mat-button>Edit Recipients</button>
      <!-- <button (click)="collapseMegaPanel()" mat-button>x</button> -->
    </div>
  </div>

  <div class="panel-content">
    <div *ngIf="panelContent === 'existingContacts'" class="existing-contacts">
        <div class="contact-list-type">
            Groups
            <div class="contact-list-of-buttons">
                <button class="contact-button" *ngFor="let contact of getContactsForType('group')" mat-button (click)="addContactToSelectedContacts(contact.id)" [disabled]="isContactSelected(contact.id)">{{contact.name}}</button>
            </div>
        </div>
        <div class="contact-list-type">
            Slack
            <div class="contact-list-of-buttons">
                <button class="contact-button" *ngFor="let contact of getContactsForType('slack')" mat-button (click)="addContactToSelectedContacts(contact.id)" [disabled]="isContactSelected(contact.id)">{{contact.name}}</button>
            </div>
        </div>
        <div class="contact-list-type">
            OpsGenie
            <div class="contact-list-of-buttons">
                <button class="contact-button" *ngFor="let contact of getContactsForType('opsgenie')" mat-button (click)="addContactToSelectedContacts(contact.id)" [disabled]="isContactSelected(contact.id)">{{contact.name}}</button>
            </div>
        </div>
        <div class="contact-list-type">
            Email
            <div class="contact-list-of-buttons">
                <button class="contact-button" *ngFor="let contact of getContactsForType('email')" mat-button (click)="addContactToSelectedContacts(contact.id)" [disabled]="isContactSelected(contact.id)">{{contact.name}}</button>
            </div>
        </div>
    </div>

    <div *ngIf="panelContent === 'group'">
        <div class="contacts-title">Create Group </div>
        <div class="contacts-create-form">
            <div class="labels">
                <div class="label">name</div>
                <div class="label">Emails</div>
                <div class="label">OpsGenie</div>
                <div class="label">Slack</div>
            </div>

            <div class="selectors">
                <div class="text-field selector">
                    <input #name matInput (keyup)="latestContactName(name.value)">
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
            </div>
        </div>
        <button mat-button (click)="addContact('Group')">Create</button>
        <button mat-button (click)="setPanelContent('existingContacts')">cancel</button>
    </div>

    <div *ngIf="panelContent === 'opsgenie'">
        <div class="contacts-title">Create OpsGenie Contact </div>
        <div class="contacts-create-form">
            <div class="labels">
                <div class="label">Team name</div>
                <div class="label">API Key</div>
                <div class="label">Priority</div>
                <div class="label">Tags</div>
            </div>

            <div class="selectors">
                <div class="text-field selector">
                    <input #name matInput (keyup)="latestContactName(name.value)">
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
            </div>
        </div>
        <button mat-button (click)="addContact('OpsGenie')">Create</button>
        <button mat-button (click)="setPanelContent('existingContacts')">cancel</button>
    </div>

    <div *ngIf="panelContent === 'slack'">
        <div class="contacts-title">Create Slack Contact </div>
        <div class="contacts-create-form">
            <div class="labels">
                <div class="label">Channel name (#)</div>
                <div class="label">Webhook URL</div>
            </div>

            <div class="selectors">
                <div class="text-field selector">
                    <input #name matInput (keyup)="latestContactName(name.value)">
                </div>
                <div class="text-field selector">
                    <input matInput>
                </div>
            </div>
        </div>
        <button mat-button (click)="addContact('Slack')">Create</button>
        <button mat-button (click)="setPanelContent('existingContacts')">cancel</button>
    </div>

    <div *ngIf="panelContent === 'email'">
        <div class="contacts-title">Create Email </div>
        <div class="contacts-create-form">
            <div class="labels">
                <div class="label">Email</div>
            </div>

            <div class="selectors">
                <div class="text-field selector">
                    <input #name matInput (keyup)="latestContactName(name.value)">
                </div>
            </div>
        </div>
        <button mat-button (click)="addContact('Email')">Create</button>
        <button mat-button (click)="setPanelContent('existingContacts')">cancel</button>
    </div>

  </div>
</div>