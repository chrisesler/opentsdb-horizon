<div class="headers">
  <span>
    Query Preview
  </span>

  <span>
    Threshold Preview
  </span>
</div>

<div class="graphs">
  <div class="graph-output query-preview" *ngIf="!nQueryDataLoading">
      <div #dygraph class="chart"
        dygraphsChart
        [chartType]="'line'"
        [data]="chartData"
        [size]="{'width': size.width/2 - 25, 'height': size.height - 10}"
        [options]="observedOptions"
        (lastTimeseriesHighlighted)="timeSeriesClicked($event)"
        (zoomed)="handleZoomQuery($event)">
      </div>
    </div>
    
    <div class="graph-output threshold-preview" *ngIf="thresholdData && thresholdData.ts && !nQueryDataLoading && timeseriesIndex !== -1">
      <div #dygraph class="chart"
        dygraphsChart
        [chartType]="'line'"
        [data]="thresholdData"
        [size]="{'width': size.width/2 - 25, 'height': size.height - 10}"
        [options]="thresholdOptions"
        (zoomed)="handleZoomThreshold($event)">
      </div>
    </div>

    <div *ngIf="nQueryDataLoading" class="preview-placeholder">
      <span>
        Fetching query...
      </span>
      <span>
        <div class="gif-spinner">
          <img src="/assets/spinner-26x26.gif" />
        </div>
      </span>

    </div>

    <!-- <div *ngIf="nQueryDataLoading">
        <span>
          Fetching query...
        </span>
        <span>
          <div class="gif-spinner">
            <img src="/assets/spinner-26x26.gif" />
          </div>
        </span>
  
      </div> -->

    <div *ngIf="timeseriesIndex === -1 && !nQueryDataLoading">
      ‚Üê Please click a line
    </div>
</div>
