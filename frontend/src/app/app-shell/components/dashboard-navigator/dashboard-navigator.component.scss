
@import './children/dnav-folders/dnav-folders.component';
@import './children/dnav-dashboard-item/dnav-dashboard-item.component';
@import './children/dnav-folder-item/dnav-folder-item.component';

@mixin dashboard-navigator-component-base() {
    $navbar-height: map-get($navbar-config, 'navbar-height');
    $logo-height: map-get($navbar-config, 'logo-height');

    .dashboard-navigator {
        display: flex;
        flex-direction: column;
        flex: 1;
        font-weight: 300;
        font-size: 12px;

        // Overrides for material elements specific to this component
        .mat-nav-list {
            padding-top: 0;

            .mat-list-item {
                height: 36px;
                font-weight: 300;
                font-size: 12px;

                .path-icon,
                .folder-icon,
                .dashboard-icon {
                    margin-right: 8px;
                }
            }

            &.dashboard-list,
            &.folder-list {
                .mat-list-item-content {
                    padding: 0;
                    margin-left: 0;
                }
            }
        }

        .mat-list .mat-list-item,
        .mat-nav-list .mat-list-item {
            &.no-item-message {
                .mat-list-item-content {
                    justify-content: center;
                }
            }
        }

        .mat-icon {
            height: 12px;
            width: 12px;
            font-size: 100%; 
        }

        .mat-icon-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;

            .mat-button-wrapper {
                line-height: 1;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .mat-icon {
                line-height: 1;
                width: 24px;
                height: 24px;
                font-size: 18px;
                display: flex;
                align-items: center;
            }
        }

        // dashboard toolbar at top of panel 
        .panel-toolbar {
            @include mat-elevation(0);
            @include unselectable;
            
            .nav-item {
                display: flex;
                align-items: center;
            }

            .back-to-master {
                width: 24px;
                transform: translateX(0);
                transition: all 200ms ease-in-out;
            }

            .panel-label {
                cursor: pointer;

                strong {
                    font-weight: 400;
                    font-size: 14px;
                    text-transform: uppercase;
                }
            }

            &.is-master-panel {

                .back-to-master {
                    width: 0px;
                    transform: translateX(-50px);
                }

                .panel-label {
                    cursor: default;

                    strong {
                        text-transform: capitalize;
                    }
                }
            }

            &.mat-toolbar-multiple-rows,
            &.mat-toolbar-single-row {
                min-height: $navbar-height !important;
                height: $navbar-height;
            }
        }

        .block-header {
            @include unselectable;
            display: flex;
            padding: 0 16px;
            display: flex;
            justify-content: stretch;
            align-items: center;
            height: 32px;
            margin-top: 16px;
            
            .header-label {
                text-transform: uppercase;
                font-weight: 400;
            }
        }

        // nested path tree at top
        .path-tree {
            .path-tree-item {
                .mat-icon {
                    margin-right: 8px;
                }

                &.is-active {
                    font-weight: 400;
                }
            }

            @for $i from 1 to 10 {
                $check: $i - 1;
                $val: $check * 20px;
                .leaf-#{$i} {
                    padding-left: $val;
                }
            }
        }

        // create dashboard button
        .create-dashboard {
            padding: 4px 16px;
            margin: 8px 0;

            .mat-flat-button {
                width: 100%;
                font-size: 14px;
                line-height: 36px;
            }

            .mat-icon {
                margin-right: 6px;
                height: 12px;
                width: 12px;
                font-size: 100%; 
            
            }
        }

        // pill counters
        .counter {
            @include unselectable;
            padding: 0 6px;

            .chip-count {
                border-radius: 4px;
                padding: 2px 4px;
                font-size: 10px;
                font-weight: 300;
            }
        }
    }

    // INCLUDE CHILDREN
    @include dnav-folders-component-base();
    @include dnav-dashboard-item-component-base();
    @include dnav-folder-item-component-base();
}

@mixin dashboard-navigator-component-theme($theme-config) {
    /* Theme config parts */
    $primary: map-get($theme-config, primary);
    $accent: map-get($theme-config, accent);
    $warn: map-get($theme-config, warn);
    $foreground: map-get($theme-config, foreground);
    $background: map-get($theme-config, background);
    $is-dark-theme: map-get($theme-config, is-dark);

    $text-color: map-get($background, navbar);
    $icon-color: $text-color;
    $divider: map-get($foreground, divider);

    $navbar-background: map-get($background, navbar);

    .dashboard-navigator {

        .panel-toolbar {
            background: transparent;
            border-bottom: 1px solid rgba($divider,.07);
            color: $text-color;

            &.is-master-panel {
                .header-label {
                    color: rgba($text-color,.85);
                }
            }
        }

        .navigator-panel-item,
        .mat-list .mat-list-item,
        .mat-nav-list .mat-list-item {
            color: rgba($text-color,.5);
        }

        .mat-list .mat-list-item,
        .mat-nav-list .mat-list-item {
            //color: rgba($text-color,.65);
            color: $text-color;

            .path-icon,
            .folder-icon,
            .dashboard-icon {
                margin-right: 8px;
                //color: rgba($text-color,.5);
                color: $icon-color;
            }

            &.is-active {
                color: rgba($text-color,.85);
            }
        }

        .mat-nav-list:not(.path-tree) {
            .mat-list-item:not(:last-child) {
                border-bottom: 1px solid rgba($divider,.07);
            }
        }

        .path-tree {
            border-bottom: 1px solid rgba($divider,.07);
        }

        .counter {
            .chip-count {
                color: white;
                background-color: rgba($text-color, .4);
            }
        }

        .block-header {
            background-color: rgba($text-color, .1);

            .counter {
                .chip-count {
                    background-color: rgba($text-color,.3);
                }
            }
        }

        .create-dashboard {
            .mat-flat-button {
                background-color: $navbar-background;
                color: find-color-invert($navbar-background);
            }
        }
    }

    // INCLUDE CHILDREN
    @include dnav-folders-component-theme($theme-config);
    @include dnav-dashboard-item-component-theme($theme-config);
    @include dnav-folder-item-component-theme($theme-config);
}