<div class="main-container">
    <div class="widget-output-container" fxLayout="column">
        <div class="widget-title event-stream-title" *ngIf="!editMode" fxLayout="row" fxFlex="1 1 21px">
            <span fxFlex="1 1 100%">({{events.length}}) {{widget.eventQueries[0].namespace}} - {{widget.eventQueries[0].search}}</span>
        </div>
        <div class="widget-title" *ngIf="editMode" fxLayout="row" fxFlex="1 1 30px">
            <span fxFlex="1 1 100%">{{widget.eventQueries[0].namespace}} - {{widget.eventQueries[0].search}} </span>
            <span>
                <button mat-button color="primary" class="close-edit-view-btn" (click)="closeViewEditMode()">
                    <mat-icon fontSet="denali" fontIcon="d-close"></mat-icon>
                </button>
            </span>
        </div>
      
        <div class="widget-output notCentered" #widgetoutput [ngClass]="{'top-margin': editMode }">
            <div class="widget-container">
                <event-list *ngIf="editMode" [events]="events" [timezone]="timezone" [startTime]="startTime" [endTime]="endTime" [previewLimit]="5">
                </event-list>
                <!-- Limit to 5 b/c rendering slows down query entry -->
                <event-list *ngIf="!editMode" [events]="events" [timezone]="timezone" [startTime]="startTime" [endTime]="endTime">
                </event-list>
            </div>
        </div>
      </div>
      
      <div class="widget-controls-container" *ngIf="editMode">
        <!-- tabs with config content -->
        <mat-tab-group class="widget-configs" selectedIndex="0" color="primary" [@.disabled]="'true'" mat-align-tabs="start">
            <mat-tab label="Events" [disabled]="editQueryId">
                <ng-template matTabContent>
                    <widget-config-events [widget]="widget" [allowEventToggling]="false" (widgetChange)="updateConfig($event);"></widget-config-events>
                </ng-template>
            </mat-tab>
            <div class="flex-spacer"></div>
        </mat-tab-group>
    </div>    
</div>

<div class="widget-actions" *ngIf="editMode">
    <!-- controls to save/cancel -->
    <button mat-raised-button color="primary" class="mat-elevation-z0" (click)="applyConfig()">Apply to Dashboard</button>
    <button mat-stroked-button color="primary" class="mat-elevation-z0" (click)="closeViewEditMode()">Cancel</button>
</div>

