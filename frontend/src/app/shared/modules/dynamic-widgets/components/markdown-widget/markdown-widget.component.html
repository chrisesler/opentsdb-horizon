<div class="widget-output-container" fxLayout="column">
  <div class="widget-title" *ngIf="editMode" fxLayout="row" fxFlex="1 1 30px">
      <span class="flex-spacer"></span>
      <span>
          <button mat-button color="primary" class="close-edit-view-btn" (click)="closeViewEditMode()">
              <mat-icon fontSet="denali" fontIcon="d-close"></mat-icon>
          </button>
      </span>
  </div>

  <div class="widget-output notCentered" #widgetoutput [style.background]="widget.settings.visual.backgroundColor" [ngClass]="{'monospace': widget.settings.visual.font === 'monospace' }">
      <div class="widget-container" [ngClass]="{'top-padding': !editMode}">
        <span class="markdown-body">
          <markdown [data]="markedText"></markdown>
        </span>
      </div>
  </div>
</div>

<div class="widget-controls-container" *ngIf="editMode">
  <!-- tabs with config content -->
  <mat-tab-group class="widget-configs" selectedIndex="0" color="primary" [@.disabled]="'true'">
      <mat-tab label="Text" [disabled]="editQueryId">
          <ng-template matTabContent>

            <!-- <div>
                <ngx-codemirror 
                [(ngModel)]="markedText" 
                [options]="{
                  lineNumbers: true,
                  theme: 'material'
                }"
              ></ngx-codemirror>
            </div> -->


              <mat-form-field class="inputArea">
                <textarea matInput [value]="markedText" (keyup)="textChanged($event.target.value)"></textarea>
              </mat-form-field>
          </ng-template>
      </mat-tab>

      <mat-tab label="Visual Appearance" [disabled]="editQueryId">
          <ng-template matTabContent>
              <markdown-widget-visual-appearance [widget]="widget" (widgetChange)="updateConfig($event);"></markdown-widget-visual-appearance>
          </ng-template>
      </mat-tab>

  </mat-tab-group>
  <div class="widget-actions" *ngIf="!editQueryId">
      <!-- controls to save/cancel -->
      <button mat-raised-button color="primary" class="mat-elevation-z0" (click)="applyConfig()">Apply to Dashboard</button>
      <button mat-stroked-button color="primary" class="mat-elevation-z0" (click)="closeViewEditMode()">Cancel</button>
  </div>
</div>
