<!--
<mat-select [value]="selected && selected.length ? selected : ['all']"  multiple (selectionChange)="setTags($event)" (openedChange)="loadTags($event)">
    <mat-option value='all'>Everything</mat-option>
    <mat-option *ngFor="let option of tagOptions" [value]="option.name">{{ option.name }}</mat-option>
</mat-select>
-->
<button mat-button (click)="loadTags(true)">
    <span class="button-label">{{ selected ? (selected.length > 0 && selected.indexOf('all') === -1) ? selected.join(', ') : 'Everything' : 'Everything' }}</span>
    <span class="menu-trigger" [matMenuTriggerFor]="tagOptionsMenu" #tagOptionsMenuTrigger></span>
</button>
<mat-menu class="tag-options-cdk-menu" #tagOptionsMenu="matMenu" [overlapTrigger]="true">

    <div class="tag-options-wrapper" (click)="$event.stopPropagation()">
        <mat-selection-list #tagOptionsList (selectionChange)="onTagSelection($event, tagOptionsList.selectedOptions.selected)">
            <mat-list-option checkboxPosition="before" value='all' [selected]="optionIsSelected('all')">Everything</mat-list-option>
            <mat-list-option *ngFor="let option of tagOptions" checkboxPosition="before" [value]="option.name" [selected]="optionIsSelected(option.name)">
                {{option.name}}
            </mat-list-option>
        </mat-selection-list>  
    </div>

</mat-menu>
