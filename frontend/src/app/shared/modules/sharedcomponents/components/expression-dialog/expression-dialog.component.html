<mat-toolbar mat-dialog-title>
    <!--<span>Add Time Series</span>
    <span class="flex-spacer"></span>
    <button mat-icon-button [mat-dialog-close]="true">
        <mat-icon>close</mat-icon>
    </button>-->
    <span class="dialog-title">Add Expression</span>
    <span class="flex-spacer"></span>
    <span>
        <button mat-button color="primary" class="close-dialog-btn" [mat-dialog-close]="true">
            <mat-icon fontSet="denali" fontIcon="d-close"></mat-icon>
        </button>
    </span>
</mat-toolbar>
<mat-dialog-content>
    <div class="content-container">
        <div class="expression-form-column">
            <form [formGroup]="metricExpressionForm">
                <mat-form-field appearance="fill">
                    <mat-label>Expression Name</mat-label>
                    <input matInput placeholder="Please enter a name for this expression" maxlength="100" formControlName="expressionName" required>
                    <mat-hint>Max 100 characters</mat-hint>
                    <mat-hint align="end">{{expressionName?.length || 0}}/100</mat-hint>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>Expression Value</mat-label>
                    <textarea matInput rows="10" placeholder="Enter an expression value (e.g. [(m1+m2)/2]" formControlName="expressionValue" required></textarea>
                    <mat-hint>Add an optional description of your widget</mat-hint>
                </mat-form-field>
            </form>
        </div>
        <div class="query-list-column">
            <div class="column-header">
                <strong class="mat-subheading-1">Available Queries</strong> 
                <button mat-stroked-button color="primary" class="mat-elevation-z0 additional-query-btn" (click)="openTimeSeriesMetricDialog(mgroupId)">
                    <mat-icon fontSet="denali" fontIcon="d-add"></mat-icon>
                    <span>Additional Query</span>
                </button>
            </div>
            <div class="query-list has-scroller">
                <div class="is-scroller">
                    <div class="query-list-item" *ngFor="let metric of dialog_data.groupQueries.metrics">
                        <div class="metric-alias">
                            <span>{{ metric.alias }}</span>
                        </div>
                        <div class="metric-detail">
                            <div class="metric-label">{{ metric.label }}</div>
                            <div class="metric-tags">
                                <div class="metric-tag" *ngFor="let tag of metric.tags">
                                    <span class="tag-key">{{ tag.key }}:</span>
                                    <strong class="tag-value">{{ tag.value }}</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</mat-dialog-content>
<mat-dialog-actions>
    <button mat-raised-button color="primary" class="mat-elevation-z0" (click)="onClick_Apply()">APPLY</button>
    <button mat-stroked-button color="primary" class="mat-elevation-z0" (click)="onClick_Cancel()">CANCEL</button>
</mat-dialog-actions>
